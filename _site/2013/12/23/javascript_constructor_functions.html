<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Austin M. Brown - Blog</title>  
    <link rel="stylesheet" href="/assets/styles.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/assets/syntax.css" type="text/css" media="screen" charset="utf-8">
  </head>
  <body>
    <div id="header">
      <div id="innerHeader">
        <img class="arrow" id="arrow" src="/assets/images/arrow.png">
        <span id="gravatar-span"><img class="gravatar" src="https://www.gravatar.com/avatar/5924b217b12018759fdf627b9aa5ad4a?s=150&r=g&d=mm"></img></span>
        <h2 id="title">Austin M. Brown</h2>
        <img class="arrow" id="arrow-left" src="/assets/images/arrow-left.png">
      </div>
    </div>
    <h1 id="javascript_constructor_functions">Javascript constructor functions</h1>

<p>My goal isn’t to teach about Javascript Prototypes, that’s been <a href="http://sporto.github.io/blog/2013/02/22/a-plain-english-guide-to-javascript-prototypes/">done</a>. I want to give my opinion on how to use them.</p>

<p>If you don’t know what they are…I’ll do 2 things for us:</p>

<ol>
<li>Refer you to <a href="http://sporto.github.io/blog/2013/02/22/a-plain-english-guide-to-javascript-prototypes/">this link</a>
<ul>
<li>That’s the best article I’ve seen on it as of this writing</li>
</ul>
</li>

<li>I give you a <strong>brief</strong> synopsis of that link in case the URL ever changes:</li>
</ol>

<h3 id="recap">Recap</h3>

<p>You can inherit from other objects by doing this (but don’t do it this way; read to the end and you’ll see how to do it better):</p>
<div class='highlight'><pre><code class='js+smarty'><span class='lineno'>1</span> <span class='kd'>var</span> <span class='nx'>Student</span> <span class='o'>=</span> <span class='cp'>{</span><span class='nf'>school</span><span class='o'>:</span> <span class='s2'>&quot;The Institution&quot;</span><span class='cp'>}</span><span class='p'>;</span>
<span class='lineno'>2</span> <span class='kd'>var</span> <span class='nx'>greg</span> <span class='o'>=</span> <span class='cp'>{</span><span class='nf'>age</span><span class='o'>:</span> <span class='m'>34</span><span class='cp'>}</span><span class='p'>;</span>
<span class='lineno'>3</span> <span class='nx'>greg</span><span class='p'>.</span><span class='nx'>__proto__</span> <span class='o'>=</span> <span class='nx'>Student</span><span class='p'>;</span>
<span class='lineno'>4</span> 
<span class='lineno'>5</span> <span class='nx'>greg</span><span class='p'>.</span><span class='nx'>school</span> <span class='o'>==</span> <span class='s2'>&quot;The Institution&quot;</span><span class='p'>;</span>
</code></pre></div>
<p>Voila, you have created an object <code>greg</code> whose prototype chain includes an object <code>Student</code> such that any reference to attributes not assigned directly to greg (eg, <code>school</code>) will be searched for in <code>Students</code> because it’s part of <code>greg</code>s prototype chain.</p>

<p>There are other, better ways to do this almost this exact thing (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create">Object.create</a>) since <code>__proto__</code> isn’t supported everywhere, but <code>__proto__</code> gives you the gist.</p>

<p>Perhaps a more popular way to do this is to use what we call a <strong>constructor function</strong>. In essence, you use the <code>new</code> keyword as such:</p>
<div class='highlight'><pre><code class='js+smarty'><span class='lineno'>1</span> <span class='kd'>var</span> <span class='nx'>Student</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>name</span><span class='p'>,</span> <span class='nx'>age</span><span class='p'>)</span> <span class='cp'>{</span>
<span class='lineno'>2</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>=</span> <span class='na'>name</span><span class='o'>;</span>
<span class='lineno'>3</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>age</span> <span class='o'>=</span> <span class='na'>age</span><span class='o'>;</span>
<span class='lineno'>4</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>greet</span> <span class='o'>=</span> <span class='na'>function</span><span class='o'>()</span> <span class='o'>{</span> <span class='na'>return</span> <span class='s2'>&quot;Hello &quot;</span> <span class='o'>+</span> <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>+</span> <span class='s2'>&quot;, hope you are well&quot;</span><span class='o'>;</span> <span class='cp'>}</span><span class='p'>;</span>
<span class='lineno'>5</span> <span class='p'>}</span>
<span class='lineno'>6</span> 
<span class='lineno'>7</span> <span class='nx'>greg</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Student</span><span class='p'>(</span><span class='s2'>&quot;Greg&quot;</span><span class='p'>,</span> <span class='mi'>29</span><span class='p'>);</span>
<span class='lineno'>8</span> <span class='nx'>greg</span><span class='p'>.</span><span class='nx'>greet</span><span class='p'>()</span> <span class='o'>==</span> <span class='s2'>&quot;Hello Greg, hope you are well&quot;</span><span class='p'>;</span>
</code></pre></div>
<p>By using <code>new</code>, everything that has the keyword <code>this</code> before it becomes a member of the new object (<code>greg</code> in this case)</p>

<h3 id="my_case">My case</h3>

<p>First, have a look at these similar snippets of code</p>

<h5 id="snippet_1">Snippet 1</h5>
<div class='highlight'><pre><code class='js+smarty'><span class='lineno'>1</span> <span class='kd'>var</span> <span class='nx'>Student</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>name</span><span class='p'>,</span> <span class='nx'>age</span><span class='p'>)</span> <span class='cp'>{</span>
<span class='lineno'>2</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>=</span> <span class='na'>name</span><span class='o'>;</span>
<span class='lineno'>3</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>age</span> <span class='o'>=</span> <span class='na'>age</span><span class='o'>;</span>
<span class='lineno'>4</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>greet</span> <span class='o'>=</span> <span class='na'>function</span><span class='o'>()</span> <span class='o'>{</span> <span class='na'>return</span> <span class='s2'>&quot;Hello &quot;</span> <span class='o'>+</span> <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>+</span> <span class='s2'>&quot;, hope you are well&quot;</span> <span class='cp'>}</span><span class='p'>;</span>
<span class='lineno'>5</span> <span class='p'>}</span>
</code></pre></div>
<h5 id="snippet_2">Snippet 2</h5>
<div class='highlight'><pre><code class='js+smarty'><span class='lineno'>1</span> <span class='kd'>var</span> <span class='nx'>Student</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>name</span><span class='p'>,</span> <span class='nx'>age</span><span class='p'>)</span> <span class='cp'>{</span>
<span class='lineno'>2</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>=</span> <span class='na'>name</span><span class='o'>;</span>
<span class='lineno'>3</span>   <span class='na'>this</span><span class='o'>.</span><span class='na'>age</span> <span class='o'>=</span> <span class='na'>age</span><span class='o'>;</span>
<span class='lineno'>4</span> <span class='cp'>}</span>
<span class='lineno'>5</span> <span class='nx'>Student</span><span class='p'>.</span><span class='nx'>prototype</span><span class='p'>.</span><span class='nx'>greet</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>()</span> <span class='cp'>{</span> <span class='na'>return</span> <span class='s2'>&quot;Hello &quot;</span> <span class='o'>+</span> <span class='na'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>+</span> <span class='s2'>&quot;, hope you are well&quot;</span><span class='o'>;</span> <span class='cp'>}</span><span class='p'>;</span>
</code></pre></div>
<p><br /></p>

<p>For both of them, this still holds true:</p>
<div class='highlight'><pre><code class='js+smarty'><span class='lineno'>1</span> <span class='kd'>var</span> <span class='nx'>greg</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Student</span><span class='p'>(</span><span class='s2'>&quot;Greg&quot;</span><span class='p'>,</span> <span class='mi'>29</span><span class='p'>);</span>
<span class='lineno'>2</span> <span class='nx'>greg</span><span class='p'>.</span><span class='nx'>greet</span><span class='p'>()</span> <span class='o'>==</span> <span class='s2'>&quot;Hello Greg, hope you are well&quot;</span><span class='p'>;</span>  <span class='c1'>// evaluates to true</span>
</code></pre></div><aside style='padding: 2%; color: rgb(0, 128, 128); margin:auto 5%; background-color: rgb(240, 255, 255);'>
So, here's where you can learn what <code>prototype</code> is if you don't already know.
In the second snippet, I'm using the <code>prototype</code> property of constructor function to effectively add the rest of the <code>this</code> statements (in this case, just <code>this.greet</code>).
That's pretty much all <code>prototype</code> does.  It's a place to put things that you want a constructor function's children (so to speak) to have when they are created.  Note that it is dynamically linked, though, so even if you add a method to prototype <b>after</b> a child is created, the child will still get the property.
</aside>
<p><code>&lt;my_opinion&gt;</code></p>

<p><code>prototype</code> should <strong>always</strong> be used for non-configurable attributes. In the Student example, it’s handy to be able to pass <code>(&quot;Greg&quot;, 29)</code> to the function to configure the name and age attributes because name and age will change for every object, but the greet method can and should be shared across all methods given that it doesn’t need any instance-specific configuration. Therefore, I contend that <code>greet</code> should always be written with <code>Student.prototype</code> (as in the 2nd snippet) instead of <code>this.greet</code> (as in the 1st snippet). My reasons are 2:</p>

<ol>
<li>This pattern makes code easier to read
<ul>
<li>If you’re reading through a new JS file, and there is a constructor function, it’s easier to grasp what’s going on in the code if you have all of the configurable code in the actual constructor and then all member functions listed down below in .prototype.function_name calls.</li>
</ul>
</li>

<li>It prevents polluting the global namespace in the case that someone accidentally calls the constructor function without the <code>new</code> keyword.
<ul>
<li>If you were to call Student() without the <code>new</code> keyword before it, you would add age and name to the window object. This is a use-case that hopefully will never happen, but in the case that someone doesn’t know what the hell they’re doing (it happens), then at least <code>.greet</code> won’t get added to the global namespace as well.</li>
</ul>
</li>
</ol>

<p><code>&lt;/my_opinion&gt;</code></p>

<p>My point is simple, and it’s probably not even worth mentioning, but I try to be intentional when I code in every way, so I did my best to come up with a case for how to form constructor functions. Let me know what you think.</p>
  </body>
</html>
